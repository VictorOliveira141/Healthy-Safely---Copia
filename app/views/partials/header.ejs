<link rel="stylesheet" href="/css/header.css" />

<header class="header">
  <div class="header-geral">
    <!-- Menu Hamburger Esquerdo -->
    <div class="menu-toggle-wrapper">
      <input type="checkbox" id="menuToggle" />
      <label for="menuToggle" class="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </label>

      <nav id="menu">
        <ul>
          <li><a href="loja">Loja</a></li>
          <li><a href="tarefas">Tarefas</a></li>
          <li><a href="progressao">Progressão</a></li>
          <li><a href="#">Configuração</a></li>
          <li><a href="#">Sobre</a></li>
          <li><a href="http://www.w3schools.com">Mostrar mais</a></li>
        </ul>
        <label for="menuToggle" class="close-menu">&times;</label>
      </nav>
    </div>

    <!-- Logo -->
    <a href="/tomarammeutela" class="logo">
      <img
        src="../imagem/1x/logozeko.png"
        class="logo1"
        alt="Logo Healthy Safely"
      />
    </a>

    <!-- Menu Direito para Desktop -->
    <div class="header-ladodireito menu-desktop">
      <div class="user-icon">
        <a href="/perfil"
          ><img src="../imagem/user.png" alt="User Icon" height="50" width="50"
        /></a>
      </div>
      <a href="/login">ENTRAR</a>
      <span class="header-divider">|</span>
      <div class="header-link abrir-cadastro" style="cursor: pointer">
        CADASTRAR
      </div>
    </div>

    <!-- Menu Mobile para <= 650px -->
    <div class="menu-mobile">
      <div class="user-icon" id="perfilMenuToggle">
        <img src="../imagem/user.png" alt="User Icon" height="50" width="50" />
      </div>
      <div id="perfilMenu" class="perfil-menu hidden">
        <a href="/login" class="header-link abrir-cadastro">ENTRAR</a>
        <div class="header-link abrir-cadastro" style="cursor: pointer">
          CADASTRAR
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Modal de Cadastro Exclusivo do Header -->
<div id="headerModalCadastro" class="modal header-modal hidden">
  <div class="modal-content">
    <button id="headerCloseCadastroModal" class="close-btn">&times;</button>
    <h2>Escolha o tipo de cadastro</h2>
    <div class="opcoes-cadastro">
      <a href="/cadastroCliente" class="btn-cadastro">Como cliente</a>
      <a href="/cadastroColaborador" class="btn-cadastro">Como colaborador</a>
    </div>
  </div>
</div>

<!-- Search Bar -->
<div class="search-bar">
  <div class="barraPesquisa">
    <span class="search-icon">
      <svg width="28" height="28" viewBox="0 0 36 36" fill="none">
        <circle cx="16" cy="16" r="12" stroke="#fff" stroke-width="3" />
        <line
          x1="26"
          y1="26"
          x2="32"
          y2="32"
          stroke="#fff"
          stroke-width="3"
          stroke-linecap="round"
        />
      </svg>
    </span>
    <input type="text" class="search-input" placeholder="Busque o que deseja" />
    <i class="bi bi-cart"></i>
  </div>
</div>

<script>
  // Modal de cadastro exclusivo do Header
  const headerAbrirBtns = document.querySelectorAll(".header .abrir-cadastro");
  const headerModal = document.getElementById("headerModalCadastro");
  const headerCloseBtn = document.getElementById("headerCloseCadastroModal");

  headerAbrirBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      headerModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    });
  });

  headerCloseBtn.addEventListener("click", () => {
    headerModal.classList.add("hidden");
    document.body.style.overflow = "";
  });

  window.addEventListener("click", (e) => {
    if (e.target === headerModal) {
      headerModal.classList.add("hidden");
      document.body.style.overflow = "";
    }
  });

  // Dropdown menu mobile
  const perfilToggle = document.getElementById("perfilMenuToggle");
  const perfilMenu = document.getElementById("perfilMenu");

  perfilToggle.addEventListener("click", (e) => {
    e.stopPropagation();
    perfilMenu.classList.toggle("hidden");
  });

  window.addEventListener("click", (e) => {
    if (!perfilToggle.contains(e.target) && !perfilMenu.contains(e.target)) {
      perfilMenu.classList.add("hidden");
    }
  });
</script>

<link rel="stylesheet" href="/css/header.css" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<article class="header">
  <nav class="header-nav2" id="mobileNav" aria-label="Navega√ß√£o principal">
    <article class="nav-spacer">
      <a href="/loja">Loja</a>
      <a href="/#">Ofertas</a>
      <a href="/meuscupons">Cupons</a>
      <a href="/meuspedidos">Meus Pedidos</a>
    </article>

    <article class="nav-spacer">
      <a href="/#">Notifica√ß√µes</a>
      <a href="/#">Contato</a>
      <a href="/informacoes"> <i class="bi bi-info-circle"></i>Ajuda</a>
      <a href="/cadastroColaborador">Vender no Healthy Safely</a>
    </article>
  </nav>
</article>

<article class="header">
  <section class="header-container">
    <section class="menu-toggle-wrapper" aria-label="Menu Hamburguer">
      <input type="checkbox" id="menuToggle" />
      <label for="menuToggle" class="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </label>

      <nav id="menu" aria-label="Conte√∫do do menu Hamburguer">
        <h1>Menu</h1>
        <ul>
          <li>
            <a href="/"><i class="bi bi-house"></i> In√≠cio</a>
          </li>

          <li>
            <a href="/loja"><i class="bi bi-shop"></i> Loja</a>
          </li>

          <li>
            <a href="/esportes-performance">
              <i class="bi bi-lightning-charge"></i> Esportes & Performance
            </a>
          </li>

          <li>
            <a href="/beleza-cuidados">
              <i class="bi bi-stars"></i> Beleza & Cuidados Especiais
            </a>
          </li>

          <li>
            <a href="/suplementos-vitaminas">
              <i class="bi bi-capsule"></i> Suplementos & Vitaminas
            </a>
          </li>

          <li>
            <a href="/bebes-criancas">
              <i class="bi bi-emoji-smile"></i> Beb√™s & Crian√ßas
            </a>
          </li>

          <li>
            <a href="/saude-prevencao">
              <i class="bi bi-heart-pulse"></i> Sa√∫de & Preven√ß√£o
            </a>
          </li>

          <li>
            <a href="/higiene"><i class="bi bi-bandaid"></i> Higiene</a>
          </li>

          <li>
            <a href="/meuscupons"><i class="bi bi-ticket"></i> Cupons</a>
          </li>

          <li>
            <a href="/informacoes"><i class="bi bi-info-circle"></i> Ajuda</a>
          </li>

          <li>
            <a href="/contato"><i class="bi bi-envelope"></i> Contato</a>
          </li>
        </ul>

        <label for="menuToggle" class="close-menu">&times;</label>
      </nav>
    </section>

    <a href="/tomarammeutela" class="header-logo" aria-label="Logo">
      <img src="/imagem/1x/logozeko.png" alt="Healthy Safely" />
    </a>

    <form class="search-bar" role="search" aria-label="Barra de Pesquisa">
      <label class="search-icon" for="headerSearch">
        <svg width="15" height="15" viewBox="0 0 36 36" fill="none">
          <circle cx="16" cy="16" r="12" stroke="#fff" stroke-width="3" />
          <line
            x1="26"
            y1="26"
            x2="32"
            y2="32"
            stroke="#fff"
            stroke-width="3"
            stroke-linecap="round"
          />
        </svg>
      </label>
      <input type="text" id="headerSearch" placeholder="Busque o que deseja" />
    </form>

    <nav class="header-actions" aria-label="A√ß√µes do usu√°rio">
      <div class="user-menu" aria-label="Carrinho de compras (Fechado)">
        <a
          href="javascript:void(0);"
          class="action-btn"
          aria-label="Carrinho de compras"
          onclick="openCartMenu()"
        >
          <i class="bi bi-cart"></i>
        </a>
      </div>

      <div
        id="cartSidebar"
        class="cart-sidebar"
        aria-label="Carrinho de compras (aberto)"
      >
        <div class="cart-header">
          <h2>Carrinho de Compras</h2>
          <button class="close-btn" onclick="closeCartMenu()">&times;</button>
        </div>

        <div class="cart-sidebar-content">
          <ul id="cartItems"></ul>
          <div
            id="emptyCartMessage"
            class="empty-cart-message"
            style="
              display: none;
              text-align: center;
              padding: 20px;
              color: #999;
            "
          >
            Seu carrinho est√° vazio.
          </div>
        </div>

        <div class="cart-footer">
          <div class="total">
            <span>Total:</span>
            <span id="cartTotal">R$ 0,00</span>
          </div>
          <button>Finalizar Compra</button>
        </div>
      </div>

      <div class="user-menu notificacao" aria-label="Menu de notifica√ß√µes">
        <i class="bi bi-bell" id="notificationMenuToggle"></i>
        <section
          id="notificationMenu"
          class="notification-dropdown hidden"
          role="menu"
        >
          <h3>Notifica√ß√µes</h3>
          <ul id="notificationList">
            <% if (usuario) { %>
            <li>Nenhuma notifica√ß√£o nova.</li>
            <a href="#" role="menuitem">Ver todas as notifica√ß√µes</a>
            <% } else { %>
            <li>Por favor, fa√ßa login para ver suas notifica√ß√µes.</li>
            <% } %>
          </ul>
        </section>
      </div>

      <div class="user-menu" aria-label="Area de Cadastrar/logar">
        <% if (usuario) { %> <% if (usuario) { %>
        <div class="nome">
          <i class="bi bi-person-circle logado" id="perfilMenuToggle"></i>
          <h1>Ol√°,<%= usuario.nome.split(' ').slice(0, 2).join(' ') %>!</h1>
        </div>

        <section id="perfilMenu" class="perfil-dropdown hidden" role="menu">
          <ul>
            <li><a href="/perfil">Minha conta</a></li>
            <li><a href="/meuspedidos">Meus pedidos</a></li>
            <li><a href="/meusfavoritos">Favoritos</a></li>

            <% if (usuario.tipo === "farmacia") { %>
            <li><a href="/adm/home2">Gerenciar loja</a></li>
            <li><a href="/adm/vendas">Minhas vendas</a></li>
            <% } %>

            <li><a href="/logout" class="logout-btn">Sair</a></li>
          </ul>
        </section>
        <% } %> <% } else { %>
        <div class="logar-cadastrar">
          <i class="bi bi-person-circle abrir-cadastro" id=""></i>
          <a href="/login" role="menuitem">Entrar</a>
          <span> | </span>
          <button class="abrir-cadastro" role="menuitem">Cadastrar</button>
          <% } %>
        </div>
      </div>
    </nav>
  </section>
</article>

<article class="fundo">
  <section class="search-bar2" role="search">
    <label class="search-icon" for="mobileSearch">
      <svg width="24" height="24" viewBox="0 0 36 36" fill="none">
        <circle cx="16" cy="16" r="12" stroke="#fff" stroke-width="3" />
        <line
          x1="26"
          y1="26"
          x2="32"
          y2="32"
          stroke="#fff"
          stroke-width="3"
          stroke-linecap="round"
        />
      </svg>
    </label>
    <input type="text" id="mobileSearch" placeholder="Busque o que deseja" />
  </section>
</article>

<section
  id="headerModalCadastro"
  class="modal hidden"
  role="dialog"
  aria-modal="true"
  aria-labelledby="modalCadastroTitle"
>
  <section class="modal-content">
    <button id="headerCloseCadastroModal" class="close-btn" aria-label="Fechar">
      &times;
    </button>

    <h2 class="modalCadastroTitle">Acessar contaüîê</h2>

    <a href="/login" class="btn-cadastro">Entrar</a>

    <p class="ou">ou</p>

    <p class="titulo-cadastro">Cadastrar como:</p>

    <section class="opcoes-cadastro">
      <a href="/cadastroCliente" class="btn-cadastro">Cliente</a>
      <a href="/cadastroColaborador" class="btn-cadastro"> Colaborador </a>
    </section>
  </section>
</section>

<!--SCRIPT DO MODAL CADASTRAR-->
<script src="/js/modal-header.js"></script>
<!--SCRIPT CARRINHO -->
<script src="/js/cart-product.js"></script>
<!-- SCRIPT PARA O MODAL DE NOTIFICA√á√ïES -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const notificationMenuToggle = document.getElementById(
      "notificationMenuToggle"
    );
    const notificationMenu = document.getElementById("notificationMenu");

    notificationMenuToggle.addEventListener("click", function () {
      notificationMenu.classList.toggle("hidden");
    });

    // Fechar o modal se clicar fora dele
    document.addEventListener("click", function (event) {
      if (
        !notificationMenu.contains(event.target) &&
        !notificationMenuToggle.contains(event.target)
      ) {
        notificationMenu.classList.add("hidden");
      }
    });
  });
</script>

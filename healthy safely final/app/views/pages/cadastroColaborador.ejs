<html>
  <head>
    <title>Cadastro</title>
    <link rel="stylesheet" href="../css/colaborador.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <%- include('../partials/header.ejs') %>

    <main>
      <!-- Lado esquerdo-->
      <section class="lado-esquerdo"></section>

      <!-- Lado direito com formulário -->
      <section class="lado-direito">
        <article class="container">
          <div class="cabecalho-form">
            <h1>Cadastro de Colaborador</h1>
            <p>Escolha o tipo de colaborador que deseja cadastrar:</p>
          </div>
          <!-- Botões para escolher tipo de colaborador -->
          <div class="seletor-cadastro">
            <button
              type="button"
              id="btnFarmacia"
              class="ativo"
              onclick="mostrarFormulario('farmacia')"
            >
              Sou uma Farmácia
            </button>
            <button
              type="button"
              id="btnProfissional"
              onclick="mostrarFormulario('profissional')"
            >
              Sou um Profissional
            </button>
          </div>

          <!-- Formulário para farmácia (visível por padrão) -->
          <form
            id="formFarmacia"
            class="quadrado"
            method="POST"
            action="/cadastroFarmacia"
          >
            <h3>Dados da Farmácia</h3>
            <input
              type="text"
              name="nomeFarmacia"
              placeholder="Nome da farmácia"
              value="<%= valoresFarmacia.nomeFarmacia %>"
              class="<%= erroValidacaoFarmacia.nomeFarmacia %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.nomeFarmacia %></span>

            <input
              type="text"
              name="CNPJ"
              placeholder="CNPJ"
              value="<%= valoresFarmacia.CNPJ %>"
              class="<%= erroValidacaoFarmacia.CNPJ %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.CNPJ %></span>

            <input
              type="text"
              name="responsavel"
              placeholder="Responsável"
              value="<%= valoresFarmacia.responsavel %>"
              class="<%= erroValidacaoFarmacia.responsavel %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.responsavel %></span>

            <input
              type="text"
              name="cidade"
              placeholder="Cidade (Ex: São Paulo)"
              value="<%= valoresFarmacia.cidade %>"
              class="<%= erroValidacaoFarmacia.cidade %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.cidade %></span>

            <input
              type="text"
              name="estado"
              placeholder="Estado (Ex: SP, RJ, MG)"
              value="<%= valoresFarmacia.estado %>"
              class="<%= erroValidacaoFarmacia.estado %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.estado %></span>

            <input
              type="email"
              name="email"
              placeholder="E-mail"
              value="<%= valoresFarmacia.email %>"
              class="<%= erroValidacaoFarmacia.email %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.email %></span>

            <input
              type="password"
              name="senha"
              placeholder="Senha"
              value="<%= valoresFarmacia.senha %>"
              class="<%= erroValidacaoFarmacia.senha %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.senha %></span>

            <br />
            <label>
              Sua senha deve conter: <br />
              ✔ uma letra maiúscula <br />
              ✔ um número <br />
              ✔ um caractere especial
            </label>

            <input
              type="password"
              name="confirmarSenha"
              placeholder="Confirmar Senha"
              value="<%= valoresFarmacia.confirmarSenha %>"
              class="<%= erroValidacaoFarmacia.confirmarSenha %>"
            />
            <span class="msgErro"><%= msgErroFarmacia.confirmarSenha %></span>

            <h1 class="login">
              Já possui uma conta? Faça seu <a href="/login">login</a> ou
              torne-se um <a href="/cadastroCliente">cliente</a>
            </h1>
            <button type="submit" class="cadastrar-profissional">
              Cadastrar Farmácia
            </button>
          </form>

          <!-- Formulário para profissional (invisível por padrão) -->
          <form
            id="formProfissional"
            class="quadrado hidden"
            method="POST"
            action="/cadastroProfissional"
          >
            <h3>Dados do Profissional</h3>
            <input
              type="text"
              name="nome"
              placeholder="Nome completo"
              value="<%= valoresProfissional.nome %>"
              class="<%= erroValidacaoProfissional.nome %>"
            />
            <span class="msgErro"><%= msgErroProfissional.nome %></span>
            <br />

            <select
              name="profissao"
              class="<%= erroValidacaoProfissional.profissao %>"
            >
              <option value="">Profissão</option>
              <option
                value="medico <%= valoresProfissional.profissao === 'medico' ? 'selected' : '' %>"
              >
                Médico
              </option>
              <option
                value="nutricionista <%= valoresProfissional.profissao === 'nutricionista' ? 'selected' : '' %>"
              >
                Nutricionista
              </option>
              <option
                value="educador <%= valoresProfissional.profissao === 'educador' ? 'selected' : '' %>"
              >
                Educador Físico
              </option>
              <option
                value="outro <%= valoresProfissional.profissao === 'outro' ? 'selected' : '' %>"
              >
                Outro
              </option>
            </select>
            <span class="msgErro"><%= msgErroProfissional.profissao %></span>

            <input
              type="text"
              name="CREF"
              placeholder="CRM / CRN / CREF"
              value="<%= valoresProfissional.CREF %>"
              class="<%= erroValidacaoProfissional.CREF %>"
            />
            <span class="msgErro"><%= msgErroProfissional.CREF %></span>

            <input
              type="text"
              name="especialidade"
              placeholder="Especialidade (opcional)"
              value="<%= valoresProfissional.especialidade %>"
            />

            <input
              type="tel"
              name="whatsapp"
              placeholder="WhatsApp profissional"
              value="<%= valoresProfissional.whatsapp %>"
              class="<%= erroValidacaoProfissional.whatsapp %>"
            />
            <span class="msgErro"><%= msgErroProfissional.whatsapp %></span>

            <input
              type="email"
              name="email"
              placeholder="E-mail"
              value="<%= valoresProfissional.email %>"
              class="<%= erroValidacaoProfissional.email %>"
            />
            <span class="msgErro"><%= msgErroProfissional.email %></span>

            <input
              type="password"
              name="senha"
              placeholder="Senha"
              value="<%= valoresProfissional.senha %>"
              class="<%= erroValidacaoProfissional.senha %>"
            />
            <span class="msgErro"><%= msgErroProfissional.senha %></span>

            <input
              type="password"
              name="confirmarSenha"
              placeholder="Confirmar Senha"
              value="<%= valoresProfissional.confirmarSenha %>"
              class="<%= erroValidacaoProfissional.confirmarSenha %>"
            />
            <span class="msgErro"
              ><%= msgErroProfissional.confirmarSenha %></span
            >

            <h1 class="login">
              Já possui uma conta? Faça seu <a href="/login">login</a> ou
              torne-se um <a href="/cadastroCliente">cliente</a>
            </h1>
            <button type="submit" class="cadastrar-profissional">
              Cadastrar Profissional
            </button>
          </form>
        </article>
      </section>
    </main>

    <!-- Script para controle de formulário ativo -->
    <script>
      const formularioAtivo =
        "<%= typeof formularioAtivo !== 'undefined' ? formularioAtivo : 'farmacia' %>";
      function mostrarFormulario(tipo) {
        const formFarmacia = document.getElementById("formFarmacia");
        const formProfissional = document.getElementById("formProfissional");

        const btnFarmacia = document.getElementById("btnFarmacia");
        const btnProfissional = document.getElementById("btnProfissional");

        if (tipo === "farmacia") {
          formFarmacia.classList.remove("hidden");
          formProfissional.classList.add("hidden");
          btnFarmacia.classList.add("ativo");
          btnProfissional.classList.remove("ativo");
        } else {
          formProfissional.classList.remove("hidden");
          formFarmacia.classList.add("hidden");
          btnProfissional.classList.add("ativo");
          btnFarmacia.classList.remove("ativo");
        }
      }
      mostrarFormulario(formularioAtivo);
    </script>

    <%- include('../partials/footer.ejs') %>
  </body>
</html>
